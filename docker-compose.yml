version: '3'

services:
  inbound:
    image: local/mhs-inbound
    ports:
      - "443:443"
    environment:
      - MHS_LOG_LEVEL=NOTSET
      - MHS_INBOUND_QUEUE_HOST=localhost:5672
      - MHS_STATE_TABLE_NAME=mhs_state
  outbound:
    image: local/mhs-outbound
    ports:
      - "80:80"
    environment:
      - MHS_LOG_LEVEL=NOTSET
      - MHS_STATE_TABLE_NAME=mhs_state
  spineroutelookup:
    image: local/mhs-spineroutelookup
    ports:
      - "8080:80"
    environment:
      - MHS_LOG_LEVEL=NOTSET
      - MHS_SDS_URL=ldap://msg.opentest.hscic.gov.uk
      - MHS_DISABLE_SDS_TLS=True
  dynamodb:
    image: amazon/dynamodb-local
    ports:
      - "8000:8000"
  rabbitmq:
    build: ./common/local-env/rabbit/
    ports:
      - "15672:15672"
      - "5672:5672"
    hostname: "localhost"
