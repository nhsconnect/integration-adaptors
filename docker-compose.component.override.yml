version: '3'

services:
  route:
    build: ./integration-tests/fake_spineroutelookup

  fakespine:
    build: ./integration-tests/fake_spine
    ports:
      - "6061:443"
    environment: 
      - FAKE_SPINE_PRIVATE_KEY
      - FAKE_SPINE_PUBLIC_KEY
      - FAKE_SPINE_CA_CERTS

  outbound:
    environment:
      - MHS_SECRET_CLIENT_CERT=${OUTBOUND_CLIENT_CERT}
      - MHS_SECRET_CLIENT_KEY=${OUTBOUND_SECRET_KEY}
      - MHS_SECRET_CA_CERTS=${OUTBOUND_CA_CERT}