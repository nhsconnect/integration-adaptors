
//Message ID: '35586865-45B0-41A5-98F6-817CA6F1F5EF' configured in fakespine to return a SOAP Fault error
// after 2 retries fakespine will return a success response.

@PATIENT_NHS_NUMBER = 9689177923

# @name Return_success_response_to_the_client_when_a_business_level_retry_is_required_and_succeeds

POST http://localhost HTTP/1.1
interaction-id: REPC_IN150016UK05
message-id: 35586865-45B0-41A5-98F6-817CA6F1F5EF
sync-async: false
from-asid: {{ASID}}
Content-Type: application/json
ods-code: YES

{
    "payload": "<REPC_IN150016UK05 ITSVersion=\"XML_1.0\"\r\nxmlns=\"urn:hl7-org:v3\">\r\n<id root=\"{{GUID-idRoot}}\"/>\r\n<creationTime value=\"{{SHORT-TIMESTAMP}}\"/>\r\n<versionCode code=\"V3NPfIT4.2.00\"/>\r\n<interactionId root=\"2.16.840.1.113883.2.1.3.2.4.12\" extension=\"REPC_IN150016UK05\"/>\r\n<processingCode code=\"P\"/>\r\n<processingModeCode code=\"T\"/>\r\n<acceptAckCode code=\"NE\"/>\r\n<communicationFunctionRcv typeCode=\"RCV\">\r\n<device classCode=\"DEV\" determinerCode=\"INSTANCE\">\r\n<id root=\"1.2.826.0.1285.0.2.0.107\" extension=\"227319907548\"/>\r\n</device>\r\n</communicationFunctionRcv>\r\n<communicationFunctionSnd typeCode=\"SND\">\r\n<device classCode=\"DEV\" determinerCode=\"INSTANCE\">\r\n<id root=\"1.2.826.0.1285.0.2.0.107\" extension=\"{{ASID}}\"/>\r\n</device>\r\n</communicationFunctionSnd>\r\n<ControlActEvent classCode=\"CACT\" moodCode=\"EVN\">\r\n<author1 typeCode=\"AUT\">\r\n<AgentSystemSDS classCode=\"AGNT\">\r\n<agentSystemSDS classCode=\"DEV\" determinerCode=\"INSTANCE\">\r\n<id root=\"1.2.826.0.1285.0.2.0.107\" extension=\"{{ASID}}\"/>\r\n</agentSystemSDS>\r\n</AgentSystemSDS>\r\n</author1>\r\n<author typeCode=\"AUT\">\r\n<AgentPersonSDS classCode=\"AGNT\">\r\n<id root=\"1.2.826.0.1285.0.2.0.67\" extension=\"055888118514\"/>\r\n<agentPersonSDS classCode=\"PSN\" determinerCode=\"INSTANCE\">\r\n<id root=\"1.2.826.0.1285.0.2.0.65\" extension=\"979603625513\"/>\r\n</agentPersonSDS>\r\n<part typeCode=\"PART\">\r\n<partSDSRole classCode=\"ROL\">\r\n<id extension=\"R0260\" root=\"1.2.826.0.1285.0.2.1.104\"/>\r\n</partSDSRole>\r\n</part>\r\n</AgentPersonSDS>\r\n</author>\r\n<subject typeCode=\"SUBJ\" contextConductionInd=\"false\">\r\n<GPSummary classCode=\"COMPOSITION\" moodCode=\"EVN\">\r\n<id root=\"{{GUID-idRoot}}\"/>\r\n<code code=\"196981000000101\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.15\" displayName=\"General Practice Summary\"/>\r\n<effectiveTime value=\"{{SHORT-TIMESTAMP}}\"/>\r\n<statusCode code=\"active\"/>\r\n<author typeCode=\"AUT\" contextControlCode=\"OP\">\r\n<time value=\"{{SHORT-TIMESTAMP}}\"/>\r\n\r\n<UKCT_MT160018UK01.AgentPersonSDS classCode=\"AGNT\"\r\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n<id root=\"1.2.826.0.1285.0.2.0.67\" extension=\"055888118514\"/>\r\n<agentPersonSDS classCode=\"PSN\" determinerCode=\"INSTANCE\">\r\n<id root=\"1.2.826.0.1285.0.2.0.65\" extension=\"979603625513\"/>\r\n<name>\r\n<family>NICA_Test_Automation_Healthchecks</family>\r\n</name>\r\n</agentPersonSDS>\r\n</UKCT_MT160018UK01.AgentPersonSDS>\r\n</author>\r\n<excerptFrom typeCode=\"XCRPT\" inversionInd=\"false\" contextConductionInd=\"true\" negationInd=\"false\">\r\n<templateId root=\"2.16.840.1.113883.2.1.3.2.4.18.2\" extension=\"CSAT_RM-NPfITUK10.excerptFrom\"/>\r\n<seperatableInd value=\"false\"/>\r\n<UKCT_MT144051UK01.CareProfessionalDocumentationCRE classCode=\"CATEGORY\" moodCode=\"EVN\">\r\n<code code=\"163171000000105\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.15\" displayName=\"Care Professional Documentation\"/>\r\n<component typeCode=\"COMP\" inversionInd=\"false\" negationInd=\"false\">\r\n<templateId root=\"2.16.840.1.113883.2.1.3.2.4.18.2\" extension=\"CSAB_RM-NPfITUK10.component\"/>\r\n<seperatableInd value=\"false\"/>\r\n<presentationText classCode=\"OBS\" moodCode=\"EVN\">\r\n<value mediaType=\"text/plain\">\r\n<h1>Test data</h1>\r\n</value>\r\n<id root=\"EA3BCDEB-A439-4984-A519-2EE25EB3F24C\"/>\r\n<code code=\"PresentationText\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.17.126\" displayName=\"Presentation Text\"/>\r\n<statusCode code=\"completed\"/>\r\n<effectiveTime value=\"{{SHORT-TIMESTAMP}}\"/>\r\n</presentationText>\r\n</component>\r\n</UKCT_MT144051UK01.CareProfessionalDocumentationCRE>\r\n</excerptFrom>\r\n<pertinentInformation1 typeCode=\"PERT\" inversionInd=\"false\" contextConductionInd=\"true\" negationInd=\"false\">\r\n<templateId root=\"2.16.840.1.113883.2.1.3.2.4.18.2\" extension=\"CSAB_RM-NPfITUK10.pertinentInformation1\"/>\r\n<seperatableInd value=\"true\"/>\r\n<pertinentRootCREType classCode=\"CATEGORY\" moodCode=\"EVN\">\r\n<code code=\"163171000000105\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.15\" displayName=\"Care Professional Documentation\"/>\r\n</pertinentRootCREType>\r\n</pertinentInformation1>\r\n<pertinentInformation2 typeCode=\"PERT\" inversionInd=\"false\" contextConductionInd=\"true\" negationInd=\"false\">\r\n<templateId root=\"2.16.840.1.113883.2.1.3.2.4.18.2\" extension=\"CSAB_RM-NPfITUK10.pertinentInformation1\"/>\r\n<seperatableInd value=\"true\"/>\r\n<pertinentCREType classCode=\"CATEGORY\" moodCode=\"EVN\">\r\n<code code=\"163221000000102\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.15\" displayName=\"Allergies and Adverse Reactions\"/>\r\n<component typeCode=\"COMP\" contextConductionInd=\"true\">\r\n<templateId root=\"2.16.840.1.113883.2.1.3.2.4.18.2\" extension=\"CSAB_RM-NPfITUK10.component\"/>\r\n<seperatableInd value=\"false\"/>\r\n<UKCT_MT144053UK02.Allergy classCode=\"OBS\" moodCode=\"EVN\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n<id root=\"016CFE10-FE26-11E4-8E2F-010000002000\"/>\r\n<code code=\"218291007\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.15\" displayName=\"Adverse reaction to erythromycin (finding)\">\r\n<originalText>Adverse reaction to erythromycin</originalText>\r\n</code>\r\n<statusCode code=\"completed\"/>\r\n<effectiveTime>\r\n<low value=\"20100615\"/>\r\n</effectiveTime>\r\n<pertinentInformation typeCode=\"PERT\" contextConductionInd=\"true\">\r\n<seperatableInd value=\"false\"/>\r\n<pertinentSupportingInfo classCode=\"OBS\" moodCode=\"EVN\">\r\n<value>severe vomiting</value>\r\n<code code=\"SupportingText\" codeSystem=\"2.16.840.1.113883.2.1.3.2.4.17.126\" displayName=\"Supporting Text\"/>\r\n</pertinentSupportingInfo>\r\n</pertinentInformation>\r\n</UKCT_MT144053UK02.Allergy>\r\n</component>\r\n</pertinentCREType>\r\n</pertinentInformation2>\r\n<recordTarget typeCode=\"RCT\">\r\n<patient classCode=\"PAT\">\r\n<id root=\"2.16.840.1.113883.2.1.4.1\" extension=\"{{PATIENT_NHS_NUMBER}}\"/>\r\n</patient>\r\n</recordTarget>\r\n</GPSummary>\r\n</subject>\r\n</ControlActEvent>\r\n</REPC_IN150016UK05>\r\n"
}